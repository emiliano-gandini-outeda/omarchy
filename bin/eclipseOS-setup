#!/bin/bash

echo "=== Installing eclipseOS extra packages ==="
echo

AUR_PACKAGES=(
  "python-pyautogui"
  "vesktop"
  "clipse"
  "zen-browser-bin"
  "visual-studio-code-bin"
)

sudo pacman -Sy

yay -Sy

FAILED_PACKAGES=()

for package in "${AUR_PACKAGES[@]}"; do
  echo "-> Installing $package..."
  if ! yay -S --noconfirm "$package"; then
    echo "!! Failed to install $package"
    FAILED_PACKAGES+=("$package")
  fi
done

echo
echo "-> Installing github-desktop-bin..."
yay -S --noconfirm github-desktop-bin || echo "!! Failed to install github-desktop"
FAILED_PACKAGES+=("github-desktop")
fi

echo
echo "✔ Done! All eclipseOS packages processed."

if [ ${#FAILED_PACKAGES[@]} -gt 0 ]; then
  echo
  echo "⚠ The following packages failed to install:"
  for pkg in "${FAILED_PACKAGES[@]}"; do
    echo " - $pkg"
  done
else
  echo "✓ All packages installed successfully!"
fi

echo
echo "Press ENTER to close..."
read
